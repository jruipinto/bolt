<r-data-row (click)="toogleView()" [ariaExpanded]="isExpanded">
  <div #expandedView class="clr-row expanded-view">
    <div class="r-card-block clr-col-12">
      <h4 class="r-card-title">{{ assistencia.id }}</h4>
      <ul class="list-unstyled">
        <div class="group">
          <li class="r-card-text">
            <p><strong>Estado: </strong> {{ assistencia.estado }}</p>
          </li>
          <li class="r-card-text">
            <p>
              <strong>{{ assistencia.categoria }}</strong>
              {{ assistencia.marca }} {{ assistencia.modelo }}
              {{ assistencia.cor }}
            </p>
          </li>
        </div>
        <div class="group less-emphasis">
          <li class="r-card-text">
            <p>Problema: {{ assistencia.problema }}</p>
          </li>
          <li class="r-card-text">
            <p>Cliente: {{ assistencia.cliente_user_name }}</p>
          </li>
          <li class="r-card-text">
            <p>Técnico: {{ assistencia.tecnico }}</p>
          </li>
        </div>
      </ul>
    </div>
    <div #buttonsContainer class="r-card-footer">
      <button
        *ngIf="
          assistencia.estado === 'recebido' ||
          assistencia.estado === 'contactado' ||
          assistencia.estado === 'incontactável' ||
          assistencia.estado === 'orçamento aprovado' ||
          assistencia.estado === 'orçamento recusado' ||
          assistencia.estado === 'material recebido'
        "
        class="btn btn-success"
        (click)="runAssistencia(assistencia)"
      >
        <clr-icon shape="play"></clr-icon>
        Iniciar
      </button>
      <button class="btn btn-link" (click)="openAssistencia(assistencia)">
        <clr-icon shape="pop-out"></clr-icon> Abrir
      </button>
      <button
        *ngIf="
          assistencia?.tecnico_user_id !== loggedInUserID &&
          assistencia?.estado !== 'concluído s/ rep.' &&
          assistencia?.estado !== 'concluído' &&
          assistencia?.estado !== 'entregue'
        "
        class="btn btn-link"
        (click)="assignAssistencia(assistencia)"
      >
        <clr-icon shape="cursor-hand-open"></clr-icon> Atribuir-me
      </button>
    </div>
  </div>

  <div #collapsedView class="collapsed-view">
    <ul class="clr-row list-unstyled">
      <li class="clr-col-lg-1">
        <p>
          <span class="p2">{{ assistencia.id }}</span>
        </p>
      </li>
      <li class="clr-col-lg-2">
        <p>
          {{ assistencia.estado }}
        </p>
      </li>
      <li class="clr-col-lg-3">
        <p>
          <span class="p2">{{ assistencia.categoria }}</span>
          {{ assistencia.marca }}
          {{ assistencia.modelo }}
          {{ assistencia.cor }}
        </p>
      </li>
      <li class="clr-col-lg-2">
        <p>
          {{ assistencia.problema }}
        </p>
      </li>
      <li class="clr-col-lg-2">
        <p>
          <span class="p7">Cliente:</span> {{ assistencia.cliente_user_name }}
        </p>
      </li>
      <li class="clr-col-lg-2">
        <p>
          <span class="p7">Técnico:</span> {{ assistencia.tecnico }}
          <span *ngIf="!assistencia.tecnico">-</span>
        </p>
      </li>
    </ul>
  </div>
</r-data-row>
